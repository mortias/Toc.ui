
<!-- ------------------------------------------------- -->
<!-- --------------------- TAB 6 --------------------- -->
<!-- ------------------------------------------------- -->

<script src="../scripts/vertx/sockjs-0.3.4.min.js"></script>
<script src="../scripts/vertx/vertxbus.js"></script>
<script src="../scripts/vertx/eventbus-jquery-ui.js"></script>

<script src="../scripts/d3js/d3.process.js"></script>
<script src="../scripts/d3js/d3.v3.min.js"></script>

 <div id="tabs-6" style="min-height: ${height}px;">
  <div id="container">
   <div id="row">
    <div id="cell">
     <div id="container">
      <div id="row">
       <div id="cell"><b>Settings</b></div>
      </div>
      <div id="row">
       <div id="cell"><hr></div><div id="cell"><hr></div><div id="cell"><hr></div><div id="cell"><hr></div>
      </div>
      <div id="row">
       <div id="cell"><label for="ui">Select a skin</label></div>
       <div id="cell" name="ui">
        <select name="ui" id="ui">
         <option value="black-tie">black-tie</option>
         <option value="blitzer">blitzer</option>
         <option value="cupertino">cupertino</option>
         <option value="dark-hive">dark-hive</option>
         <option value="dot-luv">dot-luv</option>
         <option value="eggplant">eggplant</option>
         <option value="excite-bike">excite-bike</option>
         <option value="hot-sneaks">hot-sneaks</option>
         <option value="mint-choc">mint-choc</option>
         <option value="overcast">overcast</option>
         <option value="pepper-grinder">pepper-grinder</option>
         <option value="redmond">redmond</option>
         <option value="smoothness">smoothness</option>
         <option value="south-street">south-street</option>
         <option value="start">start</option>
         <option value="sunny">sunny</option>
         <option value="trontastic">trontastic</option>
         <option value="ui-darkness">ui-darkness</option>
         <option value="ui-lightness">ui-lightness</option>
         <option value="vader">vader</option>
        </select>
       </div>
       <div id="cell"></div>
       <div id="cell"></div>
      </div>
      <br>
      <div id="row">
       <div id="cell"></div>
       <div id="cell"><button id="save"><a>Save</a></button></div>
       <div id="cell"></div>
       <div id="cell"></div>
      </div>
      <br>
      <div id="row">
       <div id="cell"><br><b>Embedded tools</b></div>
      </div>
      <div id="row">
       <div id="cell"><hr></div><div id="cell"><hr></div><div id="cell"><hr></div><div id="cell"><hr></div>      </div>
      <br>
      <div id="row">
       <div id="cell"><button id="http"><a href="../../tools/swagger/index.html" title="">Swagger</a></button></div>
       <div id="cell"><button id="hawtio"><a>Hawt.io</a></button></div>
       <div id="cell"><button id="verify"><a>Verify links</a></button></div>
       <div id="cell"></div>
      </div>
      <br>
      <br>
      <div id="row">
       <div id="cell"><br><b>Health checks</b></div>
       <div id="cell"></div>
       <div id="cell" style="text-align: center"><br><b>CPU Monitoring</b></div>
       <div id="cell"></div>
      </div>
      <div id="row">
       <div id="cell"><hr></div><div id="cell"><hr></div><div id="cell"><hr></div><div id="cell"><hr></div>
      </div>
      <br>
      <div id="row">
       <div id="cell" style="vertical-align: top">
        Rest <span id="rest_info">Not connected</span><br>
        Vertx <span id="vertx_info">Not connected</span><br>
        Hawt.io <span id="hawt_info">Not connected</span><br>
       </div>
       <div id="cell"></div>
       <div id="cell">
        <table>
         <tr>
          <td colspan="2" align="center">
           Uptime <span id="system_info3">N/A</span><br><br>
          </td>
         </tr>
         <tr>
           <td align="center" valign="top" nowrap>
            &nbsp;
            <svg width="85" height="85">
             <defs>
              <clipPath id="clip1"><rect x="-30" y="-30" width="100" height="100"></rect></clipPath>
             </defs>
             <g transform="translate(35,35)">
              <circle fill="steelblue" clip-path="url(#clip1)" r="30"></circle>
              <circle fill="none" stroke="black" stroke-width="1.5" r="30"></circle>
             </g>
            </svg>
           </td>
           <td align="center" valign="top" nowrap>
            &nbsp;
            <svg width="85" height="85">
             <defs>
              <clipPath id="clip2"><rect x="-30" y="-30" width="100" height="100"></rect></clipPath>
             </defs>
             <g transform="translate(35,35)">
              <circle fill="steelblue" clip-path="url(#clip2)" r="30"></circle>
              <circle fill="none" stroke="black" stroke-width="1.5" r="30"></circle>
             </g>
            </svg>
           </td>
         </tr>
         <tr>
          <td align="center">System CPU<br><span id="system_info1">N/A</span></td>
          <td align="center">Process CPU<br><span id="system_info2">N/A</span></td>
         </tr>
        </table>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>


<!-- Dialogs -->
<div id="dialog-save-complete" title="Save complete" style="display: none;">
 <p>
  <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
  Your settings have been successfully saved.
 </p>
</div>

<div id="dialog-start-hawtio" title="Hawt.io disabled" style="display: none;">
 <p>
  <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
  Hawt.io is currently not running..<br>Would you like to start it?
 </p>
</div>

<div id="dialog-link-hawtio" title="Hawt.io started" style="display: none;">
 <p>
  <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
  Hawt.io is started! You can find it here:<br>
  <a href="http://${host}:${hawtioPort}/hawtio">http://${host}:${hawtioPort}/hawtio</a>
 </p>
</div>

<div id="dialog-get-key" title="Authorization required" style="display: none;">
  <p>
   <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 50px 0;"></span>
   <label for="encKey">Encryption key:</label>
   <input id="encKey" name="encKey" type="text"/>
   <button id="submitEncKey"><a>Unlock</a></button>
  </p>
</div>

<!-- Scripts -->
<script>

 $(document).ready(function () {
  openConn("http://${host}:${vertxPort}/eventbus");
 });

 $(function () {

  $('div[name="ui"] select').val("${theme}");
  $('button[id="submitEncKey"]').button({icons: {primary: "ui-icon-check"}});

  $('#ui')
    .selectmenu({
     change: function( event, ui ) {
      // Change the skin on runtime
      $("#stylesheet").attr({href : "../scripts/jquery/ui/themes/"+ui.item.value+"/jquery-ui.min.css"});
     }
    });

  // Submit the key via SockJs/Vertx
  $('#submitEncKey').click(function() {
   var json = {
    "action" : "sendEncryptionKey",
    "encKey" : $('#encKey').val()};
   boWrite(json);
   $("#dialog-get-key").dialog("close");
  });

  // Start verifying all links
  $('#verify').click(function() {
   $("a[href*='http']").each(function() {
      var json = {
       "action": "checkIfHrefIsValid",
       "target": this.href
      };
      boWrite(json);
   });
  });

  // Call to the settings form via SockJs/Vertx
  $('#save').click(function() {
   var json = {
    "action" : "saveCustomSettings",
    "theme" : $('#ui').val()};
   boWrite(json);
  });

  // Check if hawt.io is running
  $('#hawtio').click(function() {
   var json = {"action" : "checkIfHawtIoIsRunning"};
   boWrite(json);
  });

  // Get the toc version via REST
  $.ajax({
   type: "GET",
   dataType: "html",
   url: "http://${host}:${restPort}/api/toc/info",
   beforeSend: function(xhr) {
    xhr.setRequestHeader("Accept", "text/html");
   },
   success: function(response) {
    $('span[id="rest_info"]').text(response);
   }
  });

 });

</script>